{
  "inputs": {
    "model": "DeepSeek-V3.2",
    "server": "dgx-b300",
    "storage": "profile_default",
    "concurrency": 1000,
    "effective_context": 131072,
    "kv_precision": "fp8"
  },
  "storage_profile": {
    "name": "profile_default",
    "type": "nvme_local",
    "capacity_total_tb": 61.44,
    "usable_capacity_tb": 56.0,
    "iops_read_max": 1000000,
    "iops_write_max": 800000,
    "throughput_read_gbps": 28,
    "throughput_write_gbps": 25,
    "latency_read_ms_p50": 0.08,
    "latency_read_ms_p99": 0.15,
    "latency_write_ms_p50": 0.1,
    "latency_write_ms_p99": 0.2,
    "rack_units_u": 2,
    "power_kw": 0.5
  },
  "scenarios": {
    "minimum": {
      "config": {
        "name": "MÍNIMO",
        "peak_headroom_ratio": 0.0,
        "ha_mode": "none",
        "kv_budget_ratio": 0.7
      },
      "results": {
        "fixed_model_gib": 637.96,
        "vram_per_session_gib": 1.668,
        "sessions_budget_gib": 971.47,
        "sessions_per_node": 582,
        "sessions_per_node_effective": 500,
        "vram_total_node_effective_gib": 1591.94,
        "hbm_utilization_ratio_effective": 0.7419,
        "nodes_capacity": 2,
        "nodes_with_headroom": 2,
        "nodes_final": 2,
        "total_power_kw": 29.0,
        "total_rack_u": 20,
        "total_heat_btu_hr": 98952.0,
        "storage_power_kw": 0.5,
        "storage_rack_u": 2,
        "total_power_kw_with_storage": 29.5,
        "total_rack_u_with_storage": 22,
        "storage": {
          "storage_model_tb": 3.115,
          "storage_cache_tb": 1.852,
          "storage_logs_tb": 12.07,
          "storage_operational_tb": 0.029,
          "storage_total_tb": 17.066,
          "iops_read_peak": 75000,
          "iops_write_peak": 3000,
          "iops_read_steady": 2000,
          "iops_write_steady": 1000,
          "throughput_read_peak_gbps": 39.87,
          "throughput_write_peak_gbps": 0.01,
          "throughput_read_steady_gbps": 1.0,
          "throughput_write_steady_gbps": 0.0
        }
      },
      "rationale_storage": {
        "storage_model": {
          "formula": "storage_model_tb = weights_tb * total_replicas * storage_factor",
          "inputs": {
            "weights_gib": 637.96,
            "weights_tb": 0.623,
            "num_nodes": 2,
            "replicas_per_node": 1,
            "total_replicas": 2,
            "storage_factor": 2.5
          },
          "assumption": "Fator 2.5x inclui: 1 cópia ativa + 1 backup + 0.5 para versionamento/rollback",
          "operational_meaning": "Armazena 2 réplicas do modelo com backup e capacidade de rollback. Crítico para restart rápido e scale-out."
        },
        "storage_cache": {
          "formula": "storage_cache_tb = ((base_cache + per_session_cache * sessions) * scenario_factor * num_nodes) / 1024",
          "inputs": {
            "base_cache_gib": 50.0,
            "per_session_cache_gib": 1.0,
            "sessions_per_node": 582,
            "num_nodes": 2,
            "scenario_factor": 1.5,
            "cache_per_node_gib": 948.0
          },
          "assumption": "Cenário minimum: fator 1.5x para cache local e temporário",
          "operational_meaning": "Cache de engine compilado, artefatos e buffers temporários. Essencial para latência e throughput."
        },
        "storage_logs": {
          "formula": "storage_logs_tb = (concurrency / avg_duration * 86400 * bytes_per_req * retention_days) / (1024^4)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 2,
            "avg_request_duration_sec": 2.0,
            "requests_per_second": 500.0,
            "requests_per_day": 43200000.0,
            "bytes_per_request": 10240,
            "retention_days": 30,
            "logs_per_day_gib": 411.99
          },
          "assumption": "Cenário minimum: retenção de 30 dias. 10KB/req (logs+métricas), duração média 2s/req.",
          "operational_meaning": "Logs e métricas são críticos para debugging, auditoria e conformidade. Retenção inadequada compromete troubleshooting."
        },
        "storage_operational": {
          "formula": "storage_operational_tb = (operational_per_node * num_nodes * scenario_factor) / 1024",
          "inputs": {
            "operational_per_node_gib": 10.0,
            "num_nodes": 2,
            "scenario_factor": 1.5
          },
          "assumption": "Cenário minimum: fator 1.5x para dados operacionais",
          "operational_meaning": "Configurações, metadados e artefatos auxiliares. Essencial para orquestração e recuperação."
        },
        "storage_total": {
          "formula": "storage_total_tb = storage_model + storage_cache + storage_logs + storage_operational",
          "inputs": {
            "storage_model_tb": 3.115,
            "storage_cache_tb": 1.852,
            "storage_logs_tb": 12.07,
            "storage_operational_tb": 0.029
          },
          "assumption": "Cenário minimum: soma de todos os componentes de storage",
          "operational_meaning": "Total de 17.07 TB necessário para operação estável. Subdimensionamento compromete resiliência e tempo de recuperação."
        },
        "iops": {
          "formula": "IOPS = f(nodes_restarting, concurrency, scenario_factor)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 2,
            "nodes_restarting": 1,
            "iops_read_per_node_startup": 50000,
            "iops_read_per_node_steady": 1000,
            "scenario_factor": 1.5
          },
          "assumption": "Cenário minimum: 1 nós reiniciando simultaneamente (25%). Fator 1.5x para margem.",
          "operational_meaning": "IOPS pico (75,000 R / 3,000 W) suporta restart de 1 nós + burst de logs. IOPS steady (2,000 R / 1,000 W) para operação normal."
        },
        "throughput": {
          "formula": "Throughput = f(model_size, nodes_restarting, target_load_time, log_flush_rate)",
          "inputs": {
            "storage_model_tb": 3.12,
            "model_per_node_gib": 1594.9,
            "num_nodes": 2,
            "nodes_restarting": 1,
            "target_load_time_sec": 60.0,
            "scenario_factor": 1.5
          },
          "assumption": "Cenário minimum: carregar modelo em <60.0s. 1 nós reiniciando (25%). Fator 1.5x.",
          "operational_meaning": "Throughput pico (39.87 R / 0.01 W GB/s) garante restart rápido. Throughput steady (1.00 R / 0.00 W GB/s) para operação contínua."
        }
      }
    },
    "recommended": {
      "config": {
        "name": "RECOMENDADO",
        "peak_headroom_ratio": 0.2,
        "ha_mode": "n+1",
        "kv_budget_ratio": 0.7
      },
      "results": {
        "fixed_model_gib": 637.96,
        "vram_per_session_gib": 1.668,
        "sessions_budget_gib": 971.47,
        "sessions_per_node": 582,
        "sessions_per_node_effective": 250,
        "vram_total_node_effective_gib": 1174.95,
        "hbm_utilization_ratio_effective": 0.5476,
        "nodes_capacity": 2,
        "nodes_with_headroom": 3,
        "nodes_final": 4,
        "total_power_kw": 58.0,
        "total_rack_u": 40,
        "total_heat_btu_hr": 197904.0,
        "storage_power_kw": 0.5,
        "storage_rack_u": 2,
        "total_power_kw_with_storage": 58.5,
        "total_rack_u_with_storage": 42,
        "storage": {
          "storage_model_tb": 6.23,
          "storage_cache_tb": 3.703,
          "storage_logs_tb": 12.07,
          "storage_operational_tb": 0.059,
          "storage_total_tb": 22.062,
          "iops_read_peak": 75000,
          "iops_write_peak": 3000,
          "iops_read_steady": 4000,
          "iops_write_steady": 1000,
          "throughput_read_peak_gbps": 39.87,
          "throughput_write_peak_gbps": 0.01,
          "throughput_read_steady_gbps": 2.0,
          "throughput_write_steady_gbps": 0.0
        }
      },
      "rationale_storage": {
        "storage_model": {
          "formula": "storage_model_tb = weights_tb * total_replicas * storage_factor",
          "inputs": {
            "weights_gib": 637.96,
            "weights_tb": 0.623,
            "num_nodes": 4,
            "replicas_per_node": 1,
            "total_replicas": 4,
            "storage_factor": 2.5
          },
          "assumption": "Fator 2.5x inclui: 1 cópia ativa + 1 backup + 0.5 para versionamento/rollback",
          "operational_meaning": "Armazena 4 réplicas do modelo com backup e capacidade de rollback. Crítico para restart rápido e scale-out."
        },
        "storage_cache": {
          "formula": "storage_cache_tb = ((base_cache + per_session_cache * sessions) * scenario_factor * num_nodes) / 1024",
          "inputs": {
            "base_cache_gib": 50.0,
            "per_session_cache_gib": 1.0,
            "sessions_per_node": 582,
            "num_nodes": 4,
            "scenario_factor": 1.5,
            "cache_per_node_gib": 948.0
          },
          "assumption": "Cenário recommended: fator 1.5x para cache local e temporário",
          "operational_meaning": "Cache de engine compilado, artefatos e buffers temporários. Essencial para latência e throughput."
        },
        "storage_logs": {
          "formula": "storage_logs_tb = (concurrency / avg_duration * 86400 * bytes_per_req * retention_days) / (1024^4)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 4,
            "avg_request_duration_sec": 2.0,
            "requests_per_second": 500.0,
            "requests_per_day": 43200000.0,
            "bytes_per_request": 10240,
            "retention_days": 30,
            "logs_per_day_gib": 411.99
          },
          "assumption": "Cenário recommended: retenção de 30 dias. 10KB/req (logs+métricas), duração média 2s/req.",
          "operational_meaning": "Logs e métricas são críticos para debugging, auditoria e conformidade. Retenção inadequada compromete troubleshooting."
        },
        "storage_operational": {
          "formula": "storage_operational_tb = (operational_per_node * num_nodes * scenario_factor) / 1024",
          "inputs": {
            "operational_per_node_gib": 10.0,
            "num_nodes": 4,
            "scenario_factor": 1.5
          },
          "assumption": "Cenário recommended: fator 1.5x para dados operacionais",
          "operational_meaning": "Configurações, metadados e artefatos auxiliares. Essencial para orquestração e recuperação."
        },
        "storage_total": {
          "formula": "storage_total_tb = storage_model + storage_cache + storage_logs + storage_operational",
          "inputs": {
            "storage_model_tb": 6.23,
            "storage_cache_tb": 3.703,
            "storage_logs_tb": 12.07,
            "storage_operational_tb": 0.059
          },
          "assumption": "Cenário recommended: soma de todos os componentes de storage",
          "operational_meaning": "Total de 22.06 TB necessário para operação estável. Subdimensionamento compromete resiliência e tempo de recuperação."
        },
        "iops": {
          "formula": "IOPS = f(nodes_restarting, concurrency, scenario_factor)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 4,
            "nodes_restarting": 1,
            "iops_read_per_node_startup": 50000,
            "iops_read_per_node_steady": 1000,
            "scenario_factor": 1.5
          },
          "assumption": "Cenário recommended: 1 nós reiniciando simultaneamente (25%). Fator 1.5x para margem.",
          "operational_meaning": "IOPS pico (75,000 R / 3,000 W) suporta restart de 1 nós + burst de logs. IOPS steady (4,000 R / 1,000 W) para operação normal."
        },
        "throughput": {
          "formula": "Throughput = f(model_size, nodes_restarting, target_load_time, log_flush_rate)",
          "inputs": {
            "storage_model_tb": 6.23,
            "model_per_node_gib": 1594.9,
            "num_nodes": 4,
            "nodes_restarting": 1,
            "target_load_time_sec": 60.0,
            "scenario_factor": 1.5
          },
          "assumption": "Cenário recommended: carregar modelo em <60.0s. 1 nós reiniciando (25%). Fator 1.5x.",
          "operational_meaning": "Throughput pico (39.87 R / 0.01 W GB/s) garante restart rápido. Throughput steady (2.00 R / 0.00 W GB/s) para operação contínua."
        }
      }
    },
    "ideal": {
      "config": {
        "name": "IDEAL",
        "peak_headroom_ratio": 0.3,
        "ha_mode": "n+2",
        "kv_budget_ratio": 0.65
      },
      "results": {
        "fixed_model_gib": 637.96,
        "vram_per_session_gib": 1.668,
        "sessions_budget_gib": 902.07,
        "sessions_per_node": 540,
        "sessions_per_node_effective": 200,
        "vram_total_node_effective_gib": 1091.55,
        "hbm_utilization_ratio_effective": 0.5087,
        "nodes_capacity": 2,
        "nodes_with_headroom": 3,
        "nodes_final": 5,
        "total_power_kw": 72.5,
        "total_rack_u": 50,
        "total_heat_btu_hr": 247380.0,
        "storage_power_kw": 0.5,
        "storage_rack_u": 2,
        "total_power_kw_with_storage": 73.0,
        "total_rack_u_with_storage": 52,
        "storage": {
          "storage_model_tb": 7.788,
          "storage_cache_tb": 5.762,
          "storage_logs_tb": 36.21,
          "storage_operational_tb": 0.098,
          "storage_total_tb": 49.857,
          "iops_read_peak": 100000,
          "iops_write_peak": 4000,
          "iops_read_steady": 5000,
          "iops_write_steady": 1000,
          "throughput_read_peak_gbps": 53.16,
          "throughput_write_peak_gbps": 0.02,
          "throughput_read_steady_gbps": 2.5,
          "throughput_write_steady_gbps": 0.0
        }
      },
      "rationale_storage": {
        "storage_model": {
          "formula": "storage_model_tb = weights_tb * total_replicas * storage_factor",
          "inputs": {
            "weights_gib": 637.96,
            "weights_tb": 0.623,
            "num_nodes": 5,
            "replicas_per_node": 1,
            "total_replicas": 5,
            "storage_factor": 2.5
          },
          "assumption": "Fator 2.5x inclui: 1 cópia ativa + 1 backup + 0.5 para versionamento/rollback",
          "operational_meaning": "Armazena 5 réplicas do modelo com backup e capacidade de rollback. Crítico para restart rápido e scale-out."
        },
        "storage_cache": {
          "formula": "storage_cache_tb = ((base_cache + per_session_cache * sessions) * scenario_factor * num_nodes) / 1024",
          "inputs": {
            "base_cache_gib": 50.0,
            "per_session_cache_gib": 1.0,
            "sessions_per_node": 540,
            "num_nodes": 5,
            "scenario_factor": 2.0,
            "cache_per_node_gib": 1180.0
          },
          "assumption": "Cenário ideal: fator 2.0x para cache local e temporário",
          "operational_meaning": "Cache de engine compilado, artefatos e buffers temporários. Essencial para latência e throughput."
        },
        "storage_logs": {
          "formula": "storage_logs_tb = (concurrency / avg_duration * 86400 * bytes_per_req * retention_days) / (1024^4)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 5,
            "avg_request_duration_sec": 2.0,
            "requests_per_second": 500.0,
            "requests_per_day": 43200000.0,
            "bytes_per_request": 10240,
            "retention_days": 90,
            "logs_per_day_gib": 411.99
          },
          "assumption": "Cenário ideal: retenção de 90 dias. 10KB/req (logs+métricas), duração média 2s/req.",
          "operational_meaning": "Logs e métricas são críticos para debugging, auditoria e conformidade. Retenção inadequada compromete troubleshooting."
        },
        "storage_operational": {
          "formula": "storage_operational_tb = (operational_per_node * num_nodes * scenario_factor) / 1024",
          "inputs": {
            "operational_per_node_gib": 10.0,
            "num_nodes": 5,
            "scenario_factor": 2.0
          },
          "assumption": "Cenário ideal: fator 2.0x para dados operacionais",
          "operational_meaning": "Configurações, metadados e artefatos auxiliares. Essencial para orquestração e recuperação."
        },
        "storage_total": {
          "formula": "storage_total_tb = storage_model + storage_cache + storage_logs + storage_operational",
          "inputs": {
            "storage_model_tb": 7.788,
            "storage_cache_tb": 5.762,
            "storage_logs_tb": 36.21,
            "storage_operational_tb": 0.098
          },
          "assumption": "Cenário ideal: soma de todos os componentes de storage",
          "operational_meaning": "Total de 49.86 TB necessário para operação estável. Subdimensionamento compromete resiliência e tempo de recuperação."
        },
        "iops": {
          "formula": "IOPS = f(nodes_restarting, concurrency, scenario_factor)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 5,
            "nodes_restarting": 1,
            "iops_read_per_node_startup": 50000,
            "iops_read_per_node_steady": 1000,
            "scenario_factor": 2.0
          },
          "assumption": "Cenário ideal: 1 nós reiniciando simultaneamente (25%). Fator 2.0x para margem.",
          "operational_meaning": "IOPS pico (100,000 R / 4,000 W) suporta restart de 1 nós + burst de logs. IOPS steady (5,000 R / 1,000 W) para operação normal."
        },
        "throughput": {
          "formula": "Throughput = f(model_size, nodes_restarting, target_load_time, log_flush_rate)",
          "inputs": {
            "storage_model_tb": 7.79,
            "model_per_node_gib": 1594.9,
            "num_nodes": 5,
            "nodes_restarting": 1,
            "target_load_time_sec": 60.0,
            "scenario_factor": 2.0
          },
          "assumption": "Cenário ideal: carregar modelo em <60.0s. 1 nós reiniciando (25%). Fator 2.0x.",
          "operational_meaning": "Throughput pico (53.16 R / 0.02 W GB/s) garante restart rápido. Throughput steady (2.50 R / 0.00 W GB/s) para operação contínua."
        }
      }
    }
  },
  "warnings": [
    "ℹ️  --tensor-parallel não especificado. Assumindo TP = GPUs do servidor (8).",
    "⚠️ [MÍNIMO] Throughput leitura pico (39.87 GB/s) excede capacidade do storage (28.00 GB/s)",
    "⚠️ [RECOMENDADO] Throughput leitura pico (39.87 GB/s) excede capacidade do storage (28.00 GB/s)",
    "⚠️ [IDEAL] Throughput leitura pico (53.16 GB/s) excede capacidade do storage (28.00 GB/s)"
  ]
}