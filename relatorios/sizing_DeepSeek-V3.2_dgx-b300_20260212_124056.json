{
  "inputs": {
    "model": "DeepSeek-V3.2",
    "server": "dgx-b300",
    "storage": "profile_default",
    "concurrency": 1000,
    "effective_context": 131072,
    "kv_precision": "bf16"
  },
  "storage_profile": {
    "name": "profile_default",
    "type": "nvme_local",
    "capacity_total_tb": 61.44,
    "usable_capacity_tb": 56.0,
    "iops_read_max": 1000000,
    "iops_write_max": 800000,
    "throughput_read_mbps": 3500.0,
    "throughput_write_mbps": 3125.0,
    "block_size_kb_read": 3.584,
    "block_size_kb_write": 4.0,
    "latency_read_ms_p50": 0.08,
    "latency_read_ms_p99": 0.15,
    "latency_write_ms_p50": 0.1,
    "latency_write_ms_p99": 0.2,
    "rack_units_u": 2,
    "power_kw": 0.5
  },
  "capacity_policy": {
    "margin_percent": 0.5,
    "applied_to": [
      "storage_total",
      "storage_model",
      "storage_cache",
      "storage_logs",
      "storage_operational"
    ],
    "source": "parameters.json",
    "notes": "Margem recomendada para crescimento, reten√ß√£o adicional e eventos n√£o previstos. Baseada em pr√°ticas de SRE e governan√ßa de capacidade para ambientes de produ√ß√£o cr√≠ticos. Valor configur√°vel conforme estrat√©gia organizacional."
  },
  "scenarios": {
    "minimum": {
      "config": {
        "name": "M√çNIMO",
        "peak_headroom_ratio": 0.0,
        "ha_mode": "none",
        "kv_budget_ratio": 0.7
      },
      "results": {
        "fixed_model_gib": 637.96,
        "vram_per_session_gib": 3.3359,
        "sessions_budget_gib": 971.47,
        "sessions_per_node": 291,
        "sessions_per_node_effective": 250,
        "vram_total_node_effective_gib": 1591.94,
        "hbm_utilization_ratio_effective": 0.7419,
        "nodes_capacity": 4,
        "nodes_with_headroom": 4,
        "nodes_final": 4,
        "total_power_kw": 58.0,
        "total_rack_u": 40,
        "total_heat_btu_hr": 197904.0,
        "storage_power_kw": 0.5,
        "storage_rack_u": 2,
        "total_power_kw_with_storage": 58.5,
        "total_rack_u_with_storage": 42,
        "storage": {
          "storage_model_base_tb": 6.23,
          "storage_cache_base_tb": 1.998,
          "storage_logs_base_tb": 12.07,
          "storage_operational_base_tb": 0.059,
          "storage_total_base_tb": 20.357,
          "storage_model_recommended_tb": 9.35,
          "storage_cache_recommended_tb": 3.0,
          "storage_logs_recommended_tb": 18.1,
          "storage_operational_recommended_tb": 0.059,
          "storage_total_recommended_tb": 30.53,
          "margin_applied": true,
          "margin_percent": 0.5,
          "iops_read_peak": 75000,
          "iops_write_peak": 3000,
          "iops_read_steady": 4000,
          "iops_write_steady": 1000,
          "throughput_read_peak_gbps": 195.39,
          "throughput_write_peak_gbps": 0.01,
          "throughput_read_steady_gbps": 2.0,
          "throughput_write_steady_gbps": 0.0
        }
      },
      "rationale_storage": {
        "storage_model": {
          "formula": "storage_model_tb = weights_tb * total_replicas * storage_factor",
          "inputs": {
            "weights_gib": 637.96,
            "weights_tb": 0.623,
            "num_nodes": 4,
            "replicas_per_node": 1,
            "total_replicas": 4,
            "storage_factor": 2.5
          },
          "assumption": "Fator 2.5x inclui: 1 c√≥pia ativa + 1 backup + 0.5 para versionamento/rollback",
          "operational_meaning": "Armazena 4 r√©plicas do modelo com backup e capacidade de rollback. Cr√≠tico para restart r√°pido e scale-out."
        },
        "storage_cache": {
          "formula": "storage_cache_tb = ((base_cache + per_session_cache * sessions) * scenario_factor * num_nodes) / 1024",
          "inputs": {
            "base_cache_gib": 50.0,
            "per_session_cache_gib": 1.0,
            "sessions_per_node": 291,
            "num_nodes": 4,
            "scenario_factor": 1.5,
            "cache_per_node_gib": 511.5
          },
          "assumption": "Cen√°rio minimum: fator 1.5x para cache local e tempor√°rio",
          "operational_meaning": "Cache de engine compilado, artefatos e buffers tempor√°rios. Essencial para lat√™ncia e throughput."
        },
        "storage_logs": {
          "formula": "storage_logs_tb = (concurrency / avg_duration * 86400 * bytes_per_req * retention_days) / (1024^4)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 4,
            "avg_request_duration_sec": 2.0,
            "requests_per_second": 500.0,
            "requests_per_day": 43200000.0,
            "bytes_per_request": 10240,
            "retention_days": 30,
            "logs_per_day_gib": 411.99
          },
          "assumption": "Cen√°rio minimum: reten√ß√£o de 30 dias. 10KB/req (logs+m√©tricas), dura√ß√£o m√©dia 2s/req.",
          "operational_meaning": "Logs e m√©tricas s√£o cr√≠ticos para debugging, auditoria e conformidade. Reten√ß√£o inadequada compromete troubleshooting."
        },
        "storage_operational": {
          "formula": "storage_operational_tb = (operational_per_node * num_nodes * scenario_factor) / 1024",
          "inputs": {
            "operational_per_node_gib": 10.0,
            "num_nodes": 4,
            "scenario_factor": 1.5
          },
          "assumption": "Cen√°rio minimum: fator 1.5x para dados operacionais",
          "operational_meaning": "Configura√ß√µes, metadados e artefatos auxiliares. Essencial para orquestra√ß√£o e recupera√ß√£o."
        },
        "storage_total": {
          "formula": "storage_total_tb = storage_model + storage_cache + storage_logs + storage_operational",
          "inputs": {
            "storage_model_base_tb": 6.23,
            "storage_cache_base_tb": 1.998,
            "storage_logs_base_tb": 12.07,
            "storage_operational_base_tb": 0.059,
            "storage_total_base_tb": 20.357
          },
          "assumption": "Cen√°rio minimum: soma de todos os componentes de storage. Margem de 50% aplicada conforme pol√≠tica de capacidade.",
          "operational_meaning": "Total BASE de 20.36 TB. Total RECOMENDADO de 30.53 TB com margem de 50% para crescimento, reten√ß√£o adicional e resili√™ncia. Subdimensionamento compromete tempo de recupera√ß√£o."
        },
        "capacity_policy": {
          "margin_percent": 0.5,
          "source": "parameters.json",
          "notes": "Margem recomendada para crescimento, reten√ß√£o adicional e eventos n√£o previstos. Baseada em pr√°ticas de SRE e governan√ßa de capacidade para ambientes de produ√ß√£o cr√≠ticos. Valor configur√°vel conforme estrat√©gia organizacional."
        },
        "iops": {
          "formula": "IOPS = f(nodes_restarting, concurrency, scenario_factor)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 4,
            "nodes_restarting": 1,
            "iops_read_per_node_startup": 50000,
            "iops_read_per_node_steady": 1000,
            "scenario_factor": 1.5
          },
          "assumption": "Cen√°rio minimum: 1 n√≥s reiniciando simultaneamente (25%). Fator 1.5x para margem.",
          "operational_meaning": "IOPS pico (75,000 R / 3,000 W) suporta restart de 1 n√≥s + burst de logs. IOPS steady (4,000 R / 1,000 W) para opera√ß√£o normal."
        },
        "throughput": {
          "formula": "Throughput = f(model_size, nodes_restarting, target_load_time, log_flush_rate)",
          "inputs": {
            "storage_model_tb": 30.53,
            "model_per_node_gib": 7815.68,
            "num_nodes": 4,
            "nodes_restarting": 1,
            "target_load_time_sec": 60.0,
            "scenario_factor": 1.5
          },
          "assumption": "Cen√°rio minimum: carregar modelo em <60.0s. 1 n√≥s reiniciando (25%). Fator 1.5x.",
          "operational_meaning": "Throughput pico (195.39 R / 0.01 W GB/s) garante restart r√°pido. Throughput steady (2.00 R / 0.00 W GB/s) para opera√ß√£o cont√≠nua."
        }
      }
    },
    "recommended": {
      "config": {
        "name": "RECOMENDADO",
        "peak_headroom_ratio": 0.2,
        "ha_mode": "n+1",
        "kv_budget_ratio": 0.7
      },
      "results": {
        "fixed_model_gib": 637.96,
        "vram_per_session_gib": 3.3359,
        "sessions_budget_gib": 971.47,
        "sessions_per_node": 291,
        "sessions_per_node_effective": 167,
        "vram_total_node_effective_gib": 1315.06,
        "hbm_utilization_ratio_effective": 0.6129,
        "nodes_capacity": 4,
        "nodes_with_headroom": 5,
        "nodes_final": 6,
        "total_power_kw": 87.0,
        "total_rack_u": 60,
        "total_heat_btu_hr": 296856.0,
        "storage_power_kw": 0.5,
        "storage_rack_u": 2,
        "total_power_kw_with_storage": 87.5,
        "total_rack_u_with_storage": 62,
        "storage": {
          "storage_model_base_tb": 9.345,
          "storage_cache_base_tb": 2.997,
          "storage_logs_base_tb": 12.07,
          "storage_operational_base_tb": 0.088,
          "storage_total_base_tb": 24.5,
          "storage_model_recommended_tb": 14.02,
          "storage_cache_recommended_tb": 4.5,
          "storage_logs_recommended_tb": 18.1,
          "storage_operational_recommended_tb": 0.088,
          "storage_total_recommended_tb": 36.75,
          "margin_applied": true,
          "margin_percent": 0.5,
          "iops_read_peak": 75000,
          "iops_write_peak": 3000,
          "iops_read_steady": 6000,
          "iops_write_steady": 1000,
          "throughput_read_peak_gbps": 156.8,
          "throughput_write_peak_gbps": 0.01,
          "throughput_read_steady_gbps": 3.0,
          "throughput_write_steady_gbps": 0.0
        }
      },
      "rationale_storage": {
        "storage_model": {
          "formula": "storage_model_tb = weights_tb * total_replicas * storage_factor",
          "inputs": {
            "weights_gib": 637.96,
            "weights_tb": 0.623,
            "num_nodes": 6,
            "replicas_per_node": 1,
            "total_replicas": 6,
            "storage_factor": 2.5
          },
          "assumption": "Fator 2.5x inclui: 1 c√≥pia ativa + 1 backup + 0.5 para versionamento/rollback",
          "operational_meaning": "Armazena 6 r√©plicas do modelo com backup e capacidade de rollback. Cr√≠tico para restart r√°pido e scale-out."
        },
        "storage_cache": {
          "formula": "storage_cache_tb = ((base_cache + per_session_cache * sessions) * scenario_factor * num_nodes) / 1024",
          "inputs": {
            "base_cache_gib": 50.0,
            "per_session_cache_gib": 1.0,
            "sessions_per_node": 291,
            "num_nodes": 6,
            "scenario_factor": 1.5,
            "cache_per_node_gib": 511.5
          },
          "assumption": "Cen√°rio recommended: fator 1.5x para cache local e tempor√°rio",
          "operational_meaning": "Cache de engine compilado, artefatos e buffers tempor√°rios. Essencial para lat√™ncia e throughput."
        },
        "storage_logs": {
          "formula": "storage_logs_tb = (concurrency / avg_duration * 86400 * bytes_per_req * retention_days) / (1024^4)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 6,
            "avg_request_duration_sec": 2.0,
            "requests_per_second": 500.0,
            "requests_per_day": 43200000.0,
            "bytes_per_request": 10240,
            "retention_days": 30,
            "logs_per_day_gib": 411.99
          },
          "assumption": "Cen√°rio recommended: reten√ß√£o de 30 dias. 10KB/req (logs+m√©tricas), dura√ß√£o m√©dia 2s/req.",
          "operational_meaning": "Logs e m√©tricas s√£o cr√≠ticos para debugging, auditoria e conformidade. Reten√ß√£o inadequada compromete troubleshooting."
        },
        "storage_operational": {
          "formula": "storage_operational_tb = (operational_per_node * num_nodes * scenario_factor) / 1024",
          "inputs": {
            "operational_per_node_gib": 10.0,
            "num_nodes": 6,
            "scenario_factor": 1.5
          },
          "assumption": "Cen√°rio recommended: fator 1.5x para dados operacionais",
          "operational_meaning": "Configura√ß√µes, metadados e artefatos auxiliares. Essencial para orquestra√ß√£o e recupera√ß√£o."
        },
        "storage_total": {
          "formula": "storage_total_tb = storage_model + storage_cache + storage_logs + storage_operational",
          "inputs": {
            "storage_model_base_tb": 9.345,
            "storage_cache_base_tb": 2.997,
            "storage_logs_base_tb": 12.07,
            "storage_operational_base_tb": 0.088,
            "storage_total_base_tb": 24.5
          },
          "assumption": "Cen√°rio recommended: soma de todos os componentes de storage. Margem de 50% aplicada conforme pol√≠tica de capacidade.",
          "operational_meaning": "Total BASE de 24.50 TB. Total RECOMENDADO de 36.75 TB com margem de 50% para crescimento, reten√ß√£o adicional e resili√™ncia. Subdimensionamento compromete tempo de recupera√ß√£o."
        },
        "capacity_policy": {
          "margin_percent": 0.5,
          "source": "parameters.json",
          "notes": "Margem recomendada para crescimento, reten√ß√£o adicional e eventos n√£o previstos. Baseada em pr√°ticas de SRE e governan√ßa de capacidade para ambientes de produ√ß√£o cr√≠ticos. Valor configur√°vel conforme estrat√©gia organizacional."
        },
        "iops": {
          "formula": "IOPS = f(nodes_restarting, concurrency, scenario_factor)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 6,
            "nodes_restarting": 1,
            "iops_read_per_node_startup": 50000,
            "iops_read_per_node_steady": 1000,
            "scenario_factor": 1.5
          },
          "assumption": "Cen√°rio recommended: 1 n√≥s reiniciando simultaneamente (25%). Fator 1.5x para margem.",
          "operational_meaning": "IOPS pico (75,000 R / 3,000 W) suporta restart de 1 n√≥s + burst de logs. IOPS steady (6,000 R / 1,000 W) para opera√ß√£o normal."
        },
        "throughput": {
          "formula": "Throughput = f(model_size, nodes_restarting, target_load_time, log_flush_rate)",
          "inputs": {
            "storage_model_tb": 36.75,
            "model_per_node_gib": 6272.0,
            "num_nodes": 6,
            "nodes_restarting": 1,
            "target_load_time_sec": 60.0,
            "scenario_factor": 1.5
          },
          "assumption": "Cen√°rio recommended: carregar modelo em <60.0s. 1 n√≥s reiniciando (25%). Fator 1.5x.",
          "operational_meaning": "Throughput pico (156.80 R / 0.01 W GB/s) garante restart r√°pido. Throughput steady (3.00 R / 0.00 W GB/s) para opera√ß√£o cont√≠nua."
        }
      }
    },
    "ideal": {
      "config": {
        "name": "IDEAL",
        "peak_headroom_ratio": 0.3,
        "ha_mode": "n+2",
        "kv_budget_ratio": 0.65
      },
      "results": {
        "fixed_model_gib": 637.96,
        "vram_per_session_gib": 3.3359,
        "sessions_budget_gib": 902.07,
        "sessions_per_node": 270,
        "sessions_per_node_effective": 125,
        "vram_total_node_effective_gib": 1174.95,
        "hbm_utilization_ratio_effective": 0.5476,
        "nodes_capacity": 4,
        "nodes_with_headroom": 6,
        "nodes_final": 8,
        "total_power_kw": 116.0,
        "total_rack_u": 80,
        "total_heat_btu_hr": 395808.0,
        "storage_power_kw": 0.5,
        "storage_rack_u": 2,
        "total_power_kw_with_storage": 116.5,
        "total_rack_u_with_storage": 82,
        "storage": {
          "storage_model_base_tb": 12.46,
          "storage_cache_base_tb": 5.0,
          "storage_logs_base_tb": 36.21,
          "storage_operational_base_tb": 0.156,
          "storage_total_base_tb": 53.826,
          "storage_model_recommended_tb": 18.69,
          "storage_cache_recommended_tb": 7.5,
          "storage_logs_recommended_tb": 54.31,
          "storage_operational_recommended_tb": 0.156,
          "storage_total_recommended_tb": 80.74,
          "margin_applied": true,
          "margin_percent": 0.5,
          "iops_read_peak": 200000,
          "iops_write_peak": 4000,
          "iops_read_steady": 8000,
          "iops_write_steady": 1000,
          "throughput_read_peak_gbps": 688.98,
          "throughput_write_peak_gbps": 0.02,
          "throughput_read_steady_gbps": 4.0,
          "throughput_write_steady_gbps": 0.0
        }
      },
      "rationale_storage": {
        "storage_model": {
          "formula": "storage_model_tb = weights_tb * total_replicas * storage_factor",
          "inputs": {
            "weights_gib": 637.96,
            "weights_tb": 0.623,
            "num_nodes": 8,
            "replicas_per_node": 1,
            "total_replicas": 8,
            "storage_factor": 2.5
          },
          "assumption": "Fator 2.5x inclui: 1 c√≥pia ativa + 1 backup + 0.5 para versionamento/rollback",
          "operational_meaning": "Armazena 8 r√©plicas do modelo com backup e capacidade de rollback. Cr√≠tico para restart r√°pido e scale-out."
        },
        "storage_cache": {
          "formula": "storage_cache_tb = ((base_cache + per_session_cache * sessions) * scenario_factor * num_nodes) / 1024",
          "inputs": {
            "base_cache_gib": 50.0,
            "per_session_cache_gib": 1.0,
            "sessions_per_node": 270,
            "num_nodes": 8,
            "scenario_factor": 2.0,
            "cache_per_node_gib": 640.0
          },
          "assumption": "Cen√°rio ideal: fator 2.0x para cache local e tempor√°rio",
          "operational_meaning": "Cache de engine compilado, artefatos e buffers tempor√°rios. Essencial para lat√™ncia e throughput."
        },
        "storage_logs": {
          "formula": "storage_logs_tb = (concurrency / avg_duration * 86400 * bytes_per_req * retention_days) / (1024^4)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 8,
            "avg_request_duration_sec": 2.0,
            "requests_per_second": 500.0,
            "requests_per_day": 43200000.0,
            "bytes_per_request": 10240,
            "retention_days": 90,
            "logs_per_day_gib": 411.99
          },
          "assumption": "Cen√°rio ideal: reten√ß√£o de 90 dias. 10KB/req (logs+m√©tricas), dura√ß√£o m√©dia 2s/req.",
          "operational_meaning": "Logs e m√©tricas s√£o cr√≠ticos para debugging, auditoria e conformidade. Reten√ß√£o inadequada compromete troubleshooting."
        },
        "storage_operational": {
          "formula": "storage_operational_tb = (operational_per_node * num_nodes * scenario_factor) / 1024",
          "inputs": {
            "operational_per_node_gib": 10.0,
            "num_nodes": 8,
            "scenario_factor": 2.0
          },
          "assumption": "Cen√°rio ideal: fator 2.0x para dados operacionais",
          "operational_meaning": "Configura√ß√µes, metadados e artefatos auxiliares. Essencial para orquestra√ß√£o e recupera√ß√£o."
        },
        "storage_total": {
          "formula": "storage_total_tb = storage_model + storage_cache + storage_logs + storage_operational",
          "inputs": {
            "storage_model_base_tb": 12.46,
            "storage_cache_base_tb": 5.0,
            "storage_logs_base_tb": 36.21,
            "storage_operational_base_tb": 0.156,
            "storage_total_base_tb": 53.826
          },
          "assumption": "Cen√°rio ideal: soma de todos os componentes de storage. Margem de 50% aplicada conforme pol√≠tica de capacidade.",
          "operational_meaning": "Total BASE de 53.83 TB. Total RECOMENDADO de 80.74 TB com margem de 50% para crescimento, reten√ß√£o adicional e resili√™ncia. Subdimensionamento compromete tempo de recupera√ß√£o."
        },
        "capacity_policy": {
          "margin_percent": 0.5,
          "source": "parameters.json",
          "notes": "Margem recomendada para crescimento, reten√ß√£o adicional e eventos n√£o previstos. Baseada em pr√°ticas de SRE e governan√ßa de capacidade para ambientes de produ√ß√£o cr√≠ticos. Valor configur√°vel conforme estrat√©gia organizacional."
        },
        "iops": {
          "formula": "IOPS = f(nodes_restarting, concurrency, scenario_factor)",
          "inputs": {
            "concurrency": 1000,
            "num_nodes": 8,
            "nodes_restarting": 2,
            "iops_read_per_node_startup": 50000,
            "iops_read_per_node_steady": 1000,
            "scenario_factor": 2.0
          },
          "assumption": "Cen√°rio ideal: 2 n√≥s reiniciando simultaneamente (25%). Fator 2.0x para margem.",
          "operational_meaning": "IOPS pico (200,000 R / 4,000 W) suporta restart de 2 n√≥s + burst de logs. IOPS steady (8,000 R / 1,000 W) para opera√ß√£o normal."
        },
        "throughput": {
          "formula": "Throughput = f(model_size, nodes_restarting, target_load_time, log_flush_rate)",
          "inputs": {
            "storage_model_tb": 80.74,
            "model_per_node_gib": 10334.72,
            "num_nodes": 8,
            "nodes_restarting": 2,
            "target_load_time_sec": 60.0,
            "scenario_factor": 2.0
          },
          "assumption": "Cen√°rio ideal: carregar modelo em <60.0s. 2 n√≥s reiniciando (25%). Fator 2.0x.",
          "operational_meaning": "Throughput pico (688.98 R / 0.02 W GB/s) garante restart r√°pido. Throughput steady (4.00 R / 0.00 W GB/s) para opera√ß√£o cont√≠nua."
        }
      }
    }
  },
  "warnings": [
    "ALERTA: KV precision BF16 usa 2 bytes/elemento, dobrando consumo de mem√≥ria. Considere FP8 (1 byte) para economizar HBM.",
    "‚ÑπÔ∏è  --tensor-parallel n√£o especificado. Assumindo TP = GPUs do servidor (8).",
    "‚ö†Ô∏è [M√çNIMO] Throughput leitura pico (195.39 GB/s) excede capacidade do storage (28.00 GB/s)",
    "‚ö†Ô∏è [RECOMENDADO] Throughput leitura pico (156.80 GB/s) excede capacidade do storage (28.00 GB/s)",
    "üö® [IDEAL] Volumetria total RECOMENDADA (80.74 TB, base: 53.83 TB) excede capacidade utiliz√°vel do storage (56.00 TB)",
    "‚ö†Ô∏è [IDEAL] Throughput leitura pico (688.98 GB/s) excede capacidade do storage (28.00 GB/s)"
  ]
}